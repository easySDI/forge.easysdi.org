{"issue":{"id":1265,"project":{"id":16,"name":"easySDI"},"tracker":{"id":1,"name":"Defect"},"status":{"id":10,"name":"Closed"},"priority":{"id":5,"name":"High"},"author":{"id":383,"name":"Blatti Yves"},"category":{"id":20,"name":"SHOP"},"fixed_version":{"id":177,"name":"4.4.0"},"subject":"Unable to download BIG order file with remote storage (curlHelper)","description":"Local big file can be downloaded easyli now (#1149 & #1226) but remote files are stored in memory by cURL before being written to client.\r\nWe should stream data to client to avoid memory problems...","start_date":"2016-02-15","done_ratio":100,"custom_fields":[{"id":2,"name":"Affected version","value":"172"}],"created_on":"2016-02-15T12:59:48Z","updated_on":"2016-03-11T10:00:37Z","closed_on":"2016-03-11T10:00:37Z","journals":[{"id":7329,"user":{"id":383,"name":"Blatti Yves"},"notes":"This is a general problem of the curlHelper in easySDI libraries.\r\nThe files are downloaded in memory entirely before being sent to client.\r\n\r\nI propose to stream the result directly to client.\r\n\r\nThe only downside is the the http header Content-Length cannot be sent since size cannot be calculated, but we'll not be limited by php/server memory limitations anymore.","created_on":"2016-02-24T10:24:58Z","details":[]},{"id":7330,"user":{"id":383,"name":"Blatti Yves"},"notes":"","created_on":"2016-02-24T10:25:04Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"2"}]},{"id":7331,"user":{"id":383,"name":"Blatti Yves"},"notes":"okay, I made small adaptations in curlHelper, it now \"streams\" (write to client data blocks from curl and flush buffer).\r\nI tested it with:\r\n* MAP\r\n** WMS via php proxy\r\n** WFS via PHP proxy\r\n* SHOP\r\n** Download from remote file (MD link in catalog)\r\n*** Single file\r\n*** Grid\r\n*** With and without authentication\r\n** Download a remote order-diffusion file\r\n* the URL tester","created_on":"2016-02-25T10:39:39Z","details":[]},{"id":7332,"user":{"id":383,"name":"Blatti Yves"},"notes":"","created_on":"2016-02-25T10:40:13Z","details":[{"property":"attr","name":"subject","old_value":"Unable to download BIG order file with remote storage","new_value":"Unable to download BIG order file with remote storage (curlHelper)"}]},{"id":7333,"user":{"id":383,"name":"Blatti Yves"},"notes":"rev. 9496","created_on":"2016-02-25T10:42:54Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"},{"property":"attr","name":"fixed_version_id","new_value":"177"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]},{"id":7353,"user":{"id":383,"name":"Blatti Yves"},"created_on":"2016-03-04T10:07:53Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"12"}]},{"id":7358,"user":{"id":383,"name":"Blatti Yves"},"created_on":"2016-03-04T10:08:17Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"383","new_value":"23"}]},{"id":7367,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2016-03-11T10:00:25Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"23"}]},{"id":7372,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2016-03-11T10:00:37Z","details":[{"property":"attr","name":"status_id","old_value":"12","new_value":"10"}]}]}}