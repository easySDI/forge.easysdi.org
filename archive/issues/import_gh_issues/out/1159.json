{"issue":{"id":1159,"project":{"id":16,"name":"easySDI"},"tracker":{"id":3,"name":"Enhancement"},"status":{"id":10,"name":"Closed"},"priority":{"id":5,"name":"High"},"author":{"id":383,"name":"Blatti Yves"},"category":{"id":20,"name":"SHOP"},"fixed_version":{"id":176,"name":"4.3.2"},"subject":"Add backend authentication to zoning download","description":"We have the ability to use backend authentication when protecting an URL typed download in easySDI:\r\n<pre>\r\n+----------+    easySDI/joomla security   +---------------+   backend user/password   +--------------------------+\r\n| Client   +<---------------------------->+ easySDI SHOP  +<------------------------->|Backend: HTTP(s), (S)FTP...\r\n+----------+                              +---------------+                           +--------------------------+\r\n</pre>\r\n\r\n!current-download-url.png!\r\n\r\nWe propose to add the same for grid/zoning download.\r\nMost of the code can be reused.\r\n\r\nProposed: \r\n!zoning.png!\r\n\r\n","start_date":"2015-10-08","done_ratio":100,"custom_fields":[{"id":3,"name":"Sponsor","multiple":true,"value":["ASIT-VD (CH)"]},{"id":4,"name":"Functional impact","value":"A backend server for zoning can now be secured"},{"id":5,"name":"Ergonomic impact","value":"A user can use the two additional fields to use a secured backend"}],"created_on":"2015-10-08T09:12:43Z","updated_on":"2015-11-23T09:12:50Z","closed_on":"2015-11-23T09:12:50Z","journals":[{"id":6558,"user":{"id":383,"name":"Blatti Yves"},"notes":"","created_on":"2015-10-08T09:20:47Z","details":[{"property":"relation","name":"relates","new_value":"1158"}]},{"id":6561,"user":{"id":383,"name":"Blatti Yves"},"notes":"+1","created_on":"2015-10-08T09:36:21Z","details":[]},{"id":6566,"user":{"id":16,"name":"Portier Thomas"},"notes":"+1","created_on":"2015-10-12T22:17:41Z","details":[]},{"id":6573,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"+1","created_on":"2015-10-15T15:44:02Z","details":[{"property":"attr","name":"status_id","old_value":"7","new_value":"9"},{"property":"attr","name":"assigned_to_id","old_value":"762","new_value":"23"}]},{"id":6574,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-10-15T15:44:10Z","details":[{"property":"attr","name":"status_id","old_value":"9","new_value":"2"}]},{"id":6575,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-10-15T15:44:17Z","details":[{"property":"cf","name":"3","new_value":"ASIT-VD (CH)"}]},{"id":6613,"user":{"id":383,"name":"Blatti Yves"},"notes":"Hi H\u00e9l\u00e8ne, it works, except for those two cases:\r\n\r\n*1) Binary files:* I have tested it on grid download with HTTP basic authentication on an apache server with a simple .htacces/.htpasswd couple.\r\nProblem: when I download the file without authentication, everything works. When I add authentication and configuration in the diffusion, the downloaded files are truncated (trailing binary zeros are removed). Binary files are invalid (See sample files).\r\n\r\nThis problem seems to also affect URL download (without grid)\r\n\r\n*2) Exceptions:* Exceptions are not handled, when the password does not match for example, the backend server gives a 401, but there is a downloadable file containing the error in frontend.\r\nExample: the zip file (invalid zip) contains:\r\n<pre>\r\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\r\n<html><head>\r\n<title>401 Unauthorized</title>\r\n</head><body>\r\n<h1>Unauthorized</h1>\r\n.....\r\n</pre>\r\n","created_on":"2015-11-03T19:32:00Z","details":[{"property":"attachment","name":"953","new_value":"182-failed.zip"},{"property":"attachment","name":"954","new_value":"182-original.zip"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"80"}]},{"id":6678,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2015-11-13T14:14:45Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"23","new_value":"383"}]},{"id":6805,"user":{"id":383,"name":"Blatti Yves"},"notes":"Tested OK, thanks !","created_on":"2015-11-23T09:08:34Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"},{"property":"attr","name":"assigned_to_id","old_value":"383","new_value":"23"},{"property":"attr","name":"done_ratio","old_value":"80","new_value":"100"}]},{"id":6806,"user":{"id":383,"name":"Blatti Yves"},"notes":"","created_on":"2015-11-23T09:08:40Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"12"}]},{"id":6807,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-11-23T09:12:50Z","details":[{"property":"attr","name":"status_id","old_value":"12","new_value":"10"},{"property":"attr","name":"assigned_to_id","old_value":"23"},{"property":"attr","name":"fixed_version_id","new_value":"176"}]}]}}