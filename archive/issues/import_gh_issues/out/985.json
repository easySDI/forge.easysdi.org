{"issue":{"id":985,"project":{"id":16,"name":"easySDI"},"tracker":{"id":1,"name":"Defect"},"status":{"id":10,"name":"Closed"},"priority":{"id":5,"name":"High"},"author":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"category":{"id":15,"name":"PROXY"},"fixed_version":{"id":176,"name":"4.3.2"},"subject":"PROXY : wrong GetLegendGraphic links with layer name as number","description":"When generating the GetCapabilities document, the PROXY overwrites the GetLegendGraphic links to prefix the layer name with the physical service's prefix defined in easySDI administration. To do this , the PROXY performs a \"string replace\" action based on the layer name.\r\n\r\nBut, when the layer name is a number (like \"1\", \"3\"...), this number can be found elsewhere in the GetLegendGraphic link (like in the param version \"1.3.0\") and the replace action isn't just applied to layer name.\r\nThe resulting rewritten URL is totally wrong :\r\n\r\nhttp://localhost/proxy/foo?request=GetLegendGraphic&version=1.bar_3.0&layer=bar_3&transparent=true&format=image%2Fpng&legend_options=fontAntiAliasing%3Atrue%3BfontSize%3A11%3BfontName%3AArial&SCALE=8719.290597098212","start_date":"2015-04-21","done_ratio":100,"custom_fields":[{"id":2,"name":"Affected version","value":"172"}],"created_on":"2015-04-21T08:30:31Z","updated_on":"2015-09-18T15:16:07Z","closed_on":"2015-05-19T06:51:01Z","journals":[{"id":5391,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-05-18T14:41:06Z","details":[{"property":"attr","name":"priority_id","old_value":"4","new_value":"5"}]},{"id":5392,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-05-18T15:26:39Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"2"},{"property":"attr","name":"assigned_to_id","new_value":"23"}]},{"id":5393,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-05-18T15:31:28Z","details":[{"property":"attr","name":"fixed_version_id","new_value":"176"}]},{"id":5394,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-05-19T06:50:51Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"}]},{"id":5395,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-05-19T06:51:01Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"10"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]},{"id":6294,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2015-09-18T15:16:07Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"23"}]}]}}