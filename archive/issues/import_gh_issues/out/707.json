{"issue":{"id":707,"project":{"id":16,"name":"easySDI"},"tracker":{"id":1,"name":"Defect"},"status":{"id":10,"name":"Closed"},"priority":{"id":4,"name":"Normal"},"author":{"id":16,"name":"Portier Thomas"},"category":{"id":17,"name":"CATALOG"},"fixed_version":{"id":159,"name":"4.2.0"},"subject":"bug on deleting a ressource","description":"I go to my ressource list and I edit a metadata\r\nI go back on my list with the \"return\" button\r\nI try to delete a metadata and i got an error 500","done_ratio":100,"custom_fields":[{"id":2,"name":"Affected version","value":"146"}],"created_on":"2014-05-02T15:16:25Z","updated_on":"2015-09-18T15:18:15Z","closed_on":"2014-06-13T14:51:26Z","journals":[{"id":3249,"user":{"id":3,"name":"Magoni Bruno"},"notes":"","created_on":"2014-05-03T14:21:37Z","details":[{"property":"attr","name":"fixed_version_id","old_value":"142","new_value":"114"}]},{"id":3278,"user":{"id":3,"name":"Magoni Bruno"},"notes":"Error HTTP 500 appears only the first time we want to delete a resource; trying to delete again same resource displays correctly the confirmation modal box!\r\n","created_on":"2014-05-18T17:19:53Z","details":[{"property":"attr","name":"category_id","old_value":"12","new_value":"17"},{"property":"attr","name":"status_id","old_value":"1","new_value":"2"},{"property":"attr","name":"assigned_to_id","new_value":"761"},{"property":"attr","name":"priority_id","old_value":"5","new_value":"4"},{"property":"attr","name":"fixed_version_id","old_value":"114","new_value":"142"}]},{"id":3308,"user":{"id":761,"name":"Battaglia Marc"},"notes":"unable to reproduce... ","created_on":"2014-05-20T13:51:02Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]},{"id":3309,"user":{"id":761,"name":"Battaglia Marc"},"notes":"","created_on":"2014-05-20T13:51:19Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"10"}]},{"id":3312,"user":{"id":3,"name":"Magoni Bruno"},"notes":"","created_on":"2014-05-20T14:24:52Z","details":[{"property":"attr","name":"status_id","old_value":"10","new_value":"1"},{"property":"attr","name":"assigned_to_id","old_value":"761","new_value":"3"}]},{"id":3313,"user":{"id":3,"name":"Magoni Bruno"},"notes":"Issue rejected as impossible to reproduce...","created_on":"2014-05-20T14:25:13Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"6"}]},{"id":3398,"user":{"id":16,"name":"Portier Thomas"},"notes":"I confirm I can reproduce it.\r\n\r\nMore widely, there is a problem with links between pages of the resource panel in front-end.\r\n\r\nMy resource panel has this url : http://www.tigeo.fr/mes-ressources\r\n\r\nIf I edit a metadata, the url is switched to : http://www.tigeo.fr/component/easysdi_catalog/?view=metadata&layout=edit\r\n\r\nIt should be more like : http://www.tigeo.fr/mes-ressources/metadata/edit\r\n\r\nSame thing appears when I want to manage visualisation : http://www.tigeo.fr/component/easysdi_map/?view=visualization&layout=edit\r\n\r\nIt should be more like : http://www.tigeo.fr/mes-ressources/visualization/edit\r\n\r\nThis probleme is caused by existence of several components (core, catalog) ?","created_on":"2014-06-06T15:19:07Z","details":[{"property":"attr","name":"status_id","old_value":"6","new_value":"1"},{"property":"cf","name":"2","old_value":"144","new_value":"146"}]},{"id":3428,"user":{"id":3,"name":"Magoni Bruno"},"notes":"","created_on":"2014-06-09T09:46:08Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"3"},{"property":"attr","name":"fixed_version_id","old_value":"142","new_value":"114"}]},{"id":3494,"user":{"id":9,"name":"M\u00e9rour Xavier"},"notes":"Seems to be a general design problem. The point will be first point out to the PSCS (this friday)\r\nIt should be then discussed in Technical Committee as soom as possible to see how to solve this issue.\r\n","created_on":"2014-06-12T09:14:39Z","details":[]},{"id":3501,"user":{"id":761,"name":"Battaglia Marc"},"notes":"Ok, I reproduced the bug after editing metadata. \r\n\r\nThe problem was the use of: \r\n<pre>\r\n <a href=\"#\" onclick=\"showDeleteModal('/resources/version/remove/170',170);\">\r\n</pre>\r\ninstead of\r\n<pre>\r\n<a href=\"#\" onclick=\"showDeleteModal('/resources/version/remove/170',170); return false;\">\r\n</pre>\r\n\r\nWithout the \"return false\", the page is redirected to the current url followed by #. According to the current url, this causes an error 500.\r\n\r\nThe problem is the same for visualization.\r\n\r\nWe added return false after each method used in an onClick.","created_on":"2014-06-13T14:23:32Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"3"},{"property":"attr","name":"assigned_to_id","new_value":"761"},{"property":"attr","name":"fixed_version_id","old_value":"114","new_value":"150"}]},{"id":3502,"user":{"id":9,"name":"M\u00e9rour Xavier"},"notes":"Hello Marc,\r\n\r\nIf it solves the problem, I am happy :-)\r\nReally thought it was deeper...\r\n\r\nThanks !","created_on":"2014-06-13T14:31:49Z","details":[]},{"id":3503,"user":{"id":9,"name":"M\u00e9rour Xavier"},"notes":"Question : should not this issue put in the next release since 4.2.0 Beta 1 is already out ?","created_on":"2014-06-13T14:45:01Z","details":[]},{"id":3504,"user":{"id":3,"name":"Magoni Bruno"},"notes":"Fix has been already packaged in 4.2.0 Beta 1 :-)","created_on":"2014-06-13T14:51:26Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"10"}]},{"id":3611,"user":{"id":3,"name":"Magoni Bruno"},"created_on":"2014-06-26T14:02:12Z","details":[{"property":"attr","name":"fixed_version_id","old_value":"150","new_value":"151"}]},{"id":3738,"user":{"id":3,"name":"Magoni Bruno"},"created_on":"2014-07-11T10:01:38Z","details":[{"property":"attr","name":"fixed_version_id","old_value":"151","new_value":"153"}]},{"id":4410,"user":{"id":3,"name":"Magoni Bruno"},"created_on":"2014-12-12T15:58:28Z","details":[{"property":"attr","name":"fixed_version_id","old_value":"153","new_value":"159"}]},{"id":6378,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2015-09-18T15:18:15Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"761"}]}]}}