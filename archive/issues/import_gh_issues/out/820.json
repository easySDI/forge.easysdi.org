{"issue":{"id":820,"project":{"id":16,"name":"easySDI"},"tracker":{"id":1,"name":"Defect"},"status":{"id":10,"name":"Closed"},"priority":{"id":4,"name":"Normal"},"author":{"id":16,"name":"Portier Thomas"},"category":{"id":15,"name":"PROXY"},"fixed_version":{"id":159,"name":"4.2.0"},"subject":"Error 500 on GetCapabilities","description":"If you do a GetCapabilities on a virtual service several times, you'll have an error 500 : \r\n\r\nEtat HTTP 500 -\r\n\r\ntype Rapport d''exception\r\n\r\nmessage\r\n\r\ndescription Le serveur a rencontr\u00e9 une erreur interne () qui l'a emp\u00each\u00e9 de satisfaire la requ\u00eate.\r\n\r\nexception\r\n\r\njavax.servlet.ServletException: net.sf.ehcache.constructs.web.filter.FilterNonReentrantException: The request thread is attempting to reenter filter org.easysdi.proxy.ehcache.OGCOperationBasedCacheFilter. URL: http://lebouzin:8080/proxy_tigeo/geonetwork\r\n\tnet.sf.ehcache.constructs.web.filter.Filter.logThrowable(Filter.java:143)\r\n\tnet.sf.ehcache.constructs.web.filter.Filter.doFilter(Filter.java:91)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.easysdi.proxy.security.EasySdiRequestFilter.doFilter(EasySdiRequestFilter.java:71)\r\n\tsun.reflect.GeneratedMethodAccessor644.invoke(Unknown Source)\r\n\tsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tjava.lang.reflect.Method.invoke(Method.java:622)\r\n\torg.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n\torg.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:96)\r\n\torg.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:260)\r\n\torg.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:94)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\torg.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tcom.sun.proxy.$Proxy32.doFilter(Unknown Source)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.easysdi.proxy.security.JoomlaCookieAuthenticationFilter.doFilter(JoomlaCookieAuthenticationFilter.java:143)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\r\n\torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)\r\ncause m\u00e8re\r\n\r\nnet.sf.ehcache.constructs.web.filter.FilterNonReentrantException: The request thread is attempting to reenter filter org.easysdi.proxy.ehcache.OGCOperationBasedCacheFilter. URL: http://lebouzin:8080/proxy_tigeo/geonetwork\r\n\tnet.sf.ehcache.constructs.web.filter.CachingFilter.checkNoReentry(CachingFilter.java:537)\r\n\torg.easysdi.proxy.ehcache.OGCOperationBasedCacheFilter.buildPageInfo(OGCOperationBasedCacheFilter.java:183)\r\n\tnet.sf.ehcache.constructs.web.filter.CachingFilter.doFilter(CachingFilter.java:216)\r\n\torg.easysdi.proxy.ehcache.OGCOperationBasedCacheFilter.doFilter(OGCOperationBasedCacheFilter.java:105)\r\n\tnet.sf.ehcache.constructs.web.filter.Filter.doFilter(Filter.java:86)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.easysdi.proxy.security.EasySdiRequestFilter.doFilter(EasySdiRequestFilter.java:71)\r\n\tsun.reflect.GeneratedMethodAccessor644.invoke(Unknown Source)\r\n\tsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tjava.lang.reflect.Method.invoke(Method.java:622)\r\n\torg.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n\torg.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:96)\r\n\torg.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:260)\r\n\torg.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:94)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\torg.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tcom.sun.proxy.$Proxy32.doFilter(Unknown Source)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.easysdi.proxy.security.JoomlaCookieAuthenticationFilter.doFilter(JoomlaCookieAuthenticationFilter.java:143)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\r\n\torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)\r\nnote La trace compl\u00e8te de la cause m\u00e8re de cette erreur est disponible dans les fichiers journaux de Apache Tomcat/7.0.26.\r\n\r\nApache Tomcat/7.0.26","start_date":"2014-09-12","done_ratio":100,"custom_fields":[{"id":2,"name":"Affected version","value":"159"}],"created_on":"2014-09-12T12:19:24Z","updated_on":"2015-09-18T15:15:50Z","closed_on":"2014-11-03T08:41:27Z","journals":[{"id":4142,"user":{"id":3,"name":"Magoni Bruno"},"notes":"Seems to appear after V4.0.4...\r\n","created_on":"2014-09-23T13:51:16Z","details":[]},{"id":4210,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2014-10-14T14:40:01Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"2"},{"property":"attr","name":"assigned_to_id","new_value":"23"}]},{"id":4221,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2014-10-17T15:04:08Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"},{"property":"attr","name":"fixed_version_id","new_value":"157"}]},{"id":4243,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2014-11-03T08:20:07Z","details":[{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]},{"id":4266,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2014-11-03T08:41:27Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"10"}]},{"id":4473,"user":{"id":3,"name":"Magoni Bruno"},"created_on":"2014-12-12T16:02:05Z","details":[{"property":"attr","name":"fixed_version_id","old_value":"157","new_value":"159"}]},{"id":4517,"user":{"id":3,"name":"Magoni Bruno"},"created_on":"2014-12-12T16:07:00Z","details":[{"property":"cf","name":"2","old_value":"156","new_value":"159"}]},{"id":6261,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2015-09-18T15:15:50Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"23"}]}]}}