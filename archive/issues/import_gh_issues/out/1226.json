{"issue":{"id":1226,"project":{"id":16,"name":"easySDI"},"tracker":{"id":1,"name":"Defect"},"status":{"id":10,"name":"Closed"},"priority":{"id":4,"name":"Normal"},"author":{"id":383,"name":"Blatti Yves"},"category":{"id":20,"name":"SHOP"},"fixed_version":{"id":177,"name":"4.4.0"},"subject":"#1149 (download big files) does not work on 32 bit systems","description":"#1149 (download big files) does not work on 32 bit server systems.\r\nA file bigger than 2GB cannot have its size stored on a 32bits integer.\r\nProblem: php @filesize($file)@ will fail and HTTP header @Content-Length@ will contain an erroneous size (and browsers will stop download @ ~2GB).\r\n\r\nWe cannot rely on filesize on this systems (return is unpredictable : http://php.net/manual/en/function.filesize.php#refsect1-function.filesize-returnvalues)\r\nProposal: do not send @Content-Length@ on 32 bits systems, check this with PHP_INT_SIZE (4 = 32 bits, 8 = 64 bits)\r\nDownload will work, but there will be no size and time displayed on browsers.\r\nAffected server are 32 bit linux (very rare), and 32+64 bits windows with PHP < 7 (Most of them).","start_date":"2015-12-11","done_ratio":100,"custom_fields":[{"id":2,"name":"Affected version","value":"177"}],"created_on":"2015-12-11T10:11:17Z","updated_on":"2016-03-31T06:16:11Z","closed_on":"2015-12-14T13:52:51Z","journals":[{"id":6907,"user":{"id":383,"name":"Blatti Yves"},"notes":"rev. 9347","created_on":"2015-12-11T10:15:34Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]},{"id":6931,"user":{"id":383,"name":"Blatti Yves"},"created_on":"2015-12-14T13:06:12Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"12"}]},{"id":6940,"user":{"id":383,"name":"Blatti Yves"},"created_on":"2015-12-14T13:06:33Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"383","new_value":"23"}]},{"id":6955,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2015-12-14T13:52:51Z","details":[{"property":"attr","name":"status_id","old_value":"12","new_value":"10"}]},{"id":7506,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2016-03-31T06:16:11Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"23"}]}]}}