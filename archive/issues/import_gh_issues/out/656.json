{"issue":{"id":656,"project":{"id":16,"name":"easySDI"},"tracker":{"id":1,"name":"Defect"},"status":{"id":10,"name":"Closed"},"priority":{"id":4,"name":"Normal"},"author":{"id":3,"name":"Magoni Bruno"},"category":{"id":17,"name":"CATALOG"},"fixed_version":{"id":143,"name":"4.0.1"},"subject":"Proxy metadata published filter","description":"When CSW policies restrictions are based on \"published\" state, the PROXY build complementary filters to satisfy such restriction.\r\nThe CQL filter expression takes correctly in charge publish date:\r\n<pre>\r\nfilter += \" AND published <= '\" + dateFormat.format(new Date()) + \"'\";\r\n</pre> \r\n\r\nbut unfortunately the OGC filter expression is not equivalent\r\n<pre>\r\nfilter += \"<ogc:PropertyIsGreaterThanOrEqualTo>\";\r\nfilter += \"<ogc:PropertyName>published</ogc:PropertyName>\";\r\nDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\r\nfilter += \"<ogc:Literal>\" + dateFormat.format(new Date()) + \"</ogc:Literal>\";\r\nfilter += \"</ogc:PropertyIsGreaterThanOrEqualTo>\";\r\n</pre>\r\n\r\nFix proposal is to replace @ogc:PropertyIsGreaterThanOrEqualTo@ xml node by @ogc:PropertyIsLessThanOrEqualTo@ into https://forge.easysdi.org/projects/easysdi/repository/entry/trunk/java/easysdi/proxy/src/main/java/org/easysdi/proxy/csw/CSWProxyDataAccessibilityManager.java#L814\r\n","done_ratio":100,"custom_fields":[{"id":2,"name":"Affected version","value":"138"}],"created_on":"2014-03-26T17:04:40Z","updated_on":"2015-09-18T15:18:05Z","closed_on":"2014-04-07T13:43:57Z","journals":[{"id":2885,"user":{"id":3,"name":"Magoni Bruno"},"created_on":"2014-03-27T08:43:01Z","details":[{"property":"attr","name":"category_id","new_value":"17"}]},{"id":3090,"user":{"id":761,"name":"Battaglia Marc"},"notes":"","created_on":"2014-04-07T09:59:27Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]},{"id":3091,"user":{"id":3,"name":"Magoni Bruno"},"created_on":"2014-04-07T13:43:57Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"10"}]},{"id":6359,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2015-09-18T15:18:05Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"761"}]}]}}