{
    "issue": {
        "closed": true,
        "title": "WFS proxified GET requests loose FILTER parameter",
        "created_at": "2015-05-21T13:58:30Z",
        "labels": [
            "Defect",
            "Redmine status : Closed",
            "Category : PROXY"
        ],
        "body": "**Original author :** Blatti Yves\n\nWFS proxified GET requests loose FILTER parameter.\r\nIn PROXY (Java) GetFeatures request in GET method loose FILTER parameter.\r\n\r\nSee log (compare *QueryString* and *RemoteRequest*):\r\n\r\n```\n\r\n20\/05\/2015 17:46:56:860 [http-nio-8080-exec-5]  INFO ProxyLogger:377 - ----------------------------------------------------------------------------------\r\n20\/05\/2015 17:47:57:830 [http-nio-8080-exec-3]  INFO ProxyLogger:188 - Virtualservice=vd-asitvd-wfs\r\n20\/05\/2015 17:47:57:830 [http-nio-8080-exec-3]  INFO ProxyLogger:358 - user=spring2a2d595e6ed9a0b24f027f2b63b134d6\r\n20\/05\/2015 17:47:57:830 [http-nio-8080-exec-3]  INFO ProxyLogger:359 - requestTime=20\/05\/2015 17:47:57:830\r\n20\/05\/2015 17:47:57:830 [http-nio-8080-exec-3]  INFO ProxyLogger:360 - RemoteAddr=127.0.0.1\r\n20\/05\/2015 17:47:57:831 [http-nio-8080-exec-3]  INFO ProxyLogger:361 - RemoteUser=null\r\n20\/05\/2015 17:47:57:831 [http-nio-8080-exec-3]  INFO ProxyLogger:362 - QueryString=request=GetFeature&SERVICE=WFS&TYPENAME=WMS_ASITVD_WFS:vd.ex2000_district&VERSION=1.0.0&Filter=%3Cogc:Filter%20xmlns:ogc=%22http:\/\/www.opengis.net\/ogc%22%3E%3Cogc:PropertyIsEqualTo%3E%3Cogc:PropertyName%3EWMS_ASITVD_WFS:IDEX2000%3C\/ogc:PropertyName%3E%3Cogc:Literal%3E9%3C\/ogc:Literal%3E%3C\/ogc:PropertyIsEqualTo%3E%3C\/ogc:Filter%3E\r\n20\/05\/2015 17:47:57:831 [http-nio-8080-exec-3]  INFO ProxyLogger:363 - RequestURL=http:\/\/easysdiproxyhost.tld:8080\/proxy\/vd-asitvd-wfs\r\n20\/05\/2015 17:47:57:832 [http-nio-8080-exec-3]  INFO ProxyLogger:585 - RemoteRequestUrl=http:\/\/sourceserver.tld\/arcgis\/services\/WMS\/ASITVD_WFS\/MapServer\/WFSServer\r\n20\/05\/2015 17:47:57:833 [http-nio-8080-exec-3]  INFO ProxyLogger:586 - RemoteRequest=request=GetFeature&SERVICE=WFS&TYPENAME=WMS_ASITVD_WFS:vd.ex2000_district&version=1.0.0\r\n20\/05\/2015 17:47:57:833 [http-nio-8080-exec-3]  INFO ProxyLogger:587 - RemoteRequestLength=87\r\n20\/05\/2015 17:47:57:833 [http-nio-8080-exec-3]  INFO ProxyLogger:588 - RemoteRequestDateTime=20\/05\/2015 17:47:57:832\r\n20\/05\/2015 17:47:58:137 [http-nio-8080-exec-3] DEBUG ProxyLogger:491 -  tmpDir :  C:\\apache-tomcat-8.0.15.0_base\\temp\r\n20\/05\/2015 17:47:58:362 [http-nio-8080-exec-3]  INFO ProxyLogger:503 - RemoteResponseToRequestUrl=http:\/\/sourceserver.tld\/arcgis\/services\/WMS\/ASITVD_WFS\/MapServer\/WFSServer\r\n20\/05\/2015 17:47:58:363 [http-nio-8080-exec-3]  INFO ProxyLogger:504 - RemoteResponseLength=526989\r\n20\/05\/2015 17:47:58:364 [http-nio-8080-exec-3]  INFO ProxyLogger:506 - RemoteResponseDateTime=20\/05\/2015 17:47:58:364\r\n20\/05\/2015 17:47:58:364 [http-nio-8080-exec-3] TRACE ProxyLogger:1759 - filterServersResponseFiles begin\r\n20\/05\/2015 17:47:58:375 [http-nio-8080-exec-3] TRACE ProxyLogger:1794 - filterServersResponseFiles end\r\n20\/05\/2015 17:47:58:376 [http-nio-8080-exec-3] TRACE ProxyLogger:1848 - User postreatment file \\spring2a2d595e6ed9a0b24f027f2b63b134d6\\100\\GetFeature.xsl does not exist\r\n20\/05\/2015 17:47:58:377 [http-nio-8080-exec-3] TRACE ProxyLogger:1853 - Global postreatment file \\spring2a2d595e6ed9a0b24f027f2b63b134d6\\100\\GetFeature.xsl\\100\\GetFeature.xsl does not exist\r\n20\/05\/2015 17:47:58:379 [http-nio-8080-exec-3] TRACE ProxyLogger:2126 - GetFeature begin srsName extract\r\n20\/05\/2015 17:47:58:380 [http-nio-8080-exec-3] TRACE ProxyLogger:2202 - GetFeature end srsName extract\r\n20\/05\/2015 17:47:58:381 [http-nio-8080-exec-3] TRACE ProxyLogger:2208 - GetFeature begin to fill tempFile\r\n20\/05\/2015 17:47:58:383 [http-nio-8080-exec-3] TRACE ProxyLogger:2241 - GetFeature end to fill tempFile\r\n20\/05\/2015 17:47:58:383 [http-nio-8080-exec-3] TRACE ProxyLogger:2249 - GetFeature begin to apply localFilter\r\n20\/05\/2015 17:47:58:383 [http-nio-8080-exec-3] TRACE ProxyLogger:2339 - GetFeature end to apply localFilter\r\n20\/05\/2015 17:47:58:395 [http-nio-8080-exec-3]  INFO ProxyLogger:2568 - ClientResponseDateTime=20\/05\/2015 17:47:58:395\r\n20\/05\/2015 17:47:58:395 [http-nio-8080-exec-3] ERROR ProxyLogger:2571 - ClientResponseLength=529917\r\n20\/05\/2015 17:47:58:396 [http-nio-8080-exec-3] DEBUG ProxyLogger:741 - temporary file file:\/C:\/apache-tomcat-8.0.15.0_base\/temp\/sendData_9f04a581-0614-42c2-b403-e9b8dad324563954193622899121612.xml is deleted\r\n20\/05\/2015 17:47:58:396 [http-nio-8080-exec-3]  WARN ProxyLogger:744 - temporary file file:\/C:\/apache-tomcat-8.0.15.0_base\/temp\/transform_GetFeaturea293e049-1033-4ebc-9ab8-b25bc9ada8582805102350272757054.xml is not deleted\r\n20\/05\/2015 17:47:58:396 [http-nio-8080-exec-3]  INFO ProxyLogger:377 - ----------------------------------------------------------------------------------\r\n```\n\r\n\r\nNote: I can't tell the original affected version\r\n\r\n\n\n**Fixed versions :** 4.3.2"
    },
    "comments": [
        {
            "body": "**Original author :** Blatti Yves\n\nIt works !\r\nThanks H\u00e9l\u00e8ne !",
            "created_at": "2015-07-28T12:22:17Z"
        }
    ]
}