{"issue":{"id":999,"project":{"id":16,"name":"easySDI"},"tracker":{"id":1,"name":"Defect"},"status":{"id":10,"name":"Closed"},"priority":{"id":4,"name":"Normal"},"author":{"id":383,"name":"Blatti Yves"},"category":{"id":20,"name":"SHOP"},"fixed_version":{"id":173,"name":"4.3.1"},"subject":"Warning in JSON response on addToBasket","description":"When adding a product to basket in 4.3.1 (dev), we get a warning in JSON response:\r\n\r\n<pre>\r\n( ! ) Warning: get_object_vars() expects parameter 1 to be object, null given in C:\\wamp\\vhosts\\dev\\components\\com_easysdi_shop\\libraries\\easysdi\\sdiPerimeter.php on line 43\r\nCall Stack\r\n#TimeMemoryFunctionLocation\r\n{main}(  )..\\index.php:0\r\nJApplicationCms->execute(  )..\\index.php:40\r\nJApplicationSite->doExecute(  )..\\cms.php:252\r\nJApplicationSite->dispatch(  )..\\site.php:230\r\nJComponentHelper::renderComponent(  )..\\site.php:191\r\nJComponentHelper::executeComponent(  )..\\helper.php:371\r\nrequire_once( 'C:\\wamp\\vhosts\\dev\\components\\com_easysdi_shop\\easysdi_shop.php' )..\\helper.php:391\r\nJControllerLegacy->execute(  )..\\easysdi_shop.php:24\r\nEasysdi_shopController->addToBasket(  )..\\legacy.php:728\r\nEasysdi_shopHelper::addToBasket(  )..\\controller.php:22\r\nsdiExtraction->__construct(  )..\\easysdi_shop.php:66\r\nsdiPerimeter->__construct(  )..\\sdiExtraction.php:43\r\nsdiPerimeter->loadData(  )..\\sdiPerimeter.php:27\r\nget_object_vars(  )..\\sdiPerimeter.php:43\r\n( ! ) Warning: Invalid argument supplied for foreach() in C:\\wamp\\vhosts\\dev\\components\\com_easysdi_shop\\libraries\\easysdi\\sdiPerimeter.php on line 44\r\nCall Stack\r\n#TimeMemoryFunctionLocation\r\n{main}(  )..\\index.php:0\r\nJApplicationCms->execute(  )..\\index.php:40\r\nJApplicationSite->doExecute(  )..\\cms.php:252\r\nJApplicationSite->dispatch(  )..\\site.php:230\r\nJComponentHelper::renderComponent(  )..\\site.php:191\r\nJComponentHelper::executeComponent(  )..\\helper.php:371\r\nrequire_once( 'C:\\wamp\\vhosts\\dev\\components\\com_easysdi_shop\\easysdi_shop.php' )..\\helper.php:391\r\nJControllerLegacy->execute(  )..\\easysdi_shop.php:24\r\nEasysdi_shopController->addToBasket(  )..\\legacy.php:728\r\nEasysdi_shopHelper::addToBasket(  )..\\controller.php:22\r\nsdiExtraction->__construct(  )..\\easysdi_shop.php:66\r\nsdiPerimeter->__construct(  )..\\sdiExtraction.php:43\r\nsdiPerimeter->loadData(  )..\\sdiPerimeter.php:27\r\n{\"COUNT\":1}\r\n</pre>\r\n\r\n\r\nThis is due to: \\components\\com_easysdi_shop\\libraries\\easysdi\\sdiPerimeter.php:40+\r\n\r\nIf the perimeter is free perimeter, we don't have a maplayer and the following query returns nothing:\r\n<pre>\r\n<code class=\"sql\">\r\nselect p.*, l.service_id, l.servicetype,l.layername as maplayername,l.istiled,l.opacity, l.isindoor,l.levelfield\r\nfrom jos_sdi_perimeter p\r\njoin jos_sdi_maplayer l ON l.id=p.maplayer_id\r\nwhere p.id = 1\r\n</code>\r\n</pre>\r\n","start_date":"2015-05-05","done_ratio":100,"custom_fields":[{"id":2,"name":"Affected version","value":"172"}],"created_on":"2015-05-05T15:33:23Z","updated_on":"2015-09-18T15:20:55Z","closed_on":"2015-05-12T14:55:38Z","journals":[{"id":5312,"user":{"id":383,"name":"Blatti Yves"},"notes":"Introduced in rev. 8573","created_on":"2015-05-05T16:45:46Z","details":[]},{"id":5313,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"Have you found the fix or does it need to be investigate?","created_on":"2015-05-07T06:30:11Z","details":[{"property":"attr","name":"assigned_to_id","new_value":"383"}]},{"id":5314,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-05-07T07:29:04Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"2"},{"property":"attr","name":"assigned_to_id","old_value":"383","new_value":"23"}]},{"id":5315,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-05-07T07:33:12Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"},{"property":"attr","name":"assigned_to_id","old_value":"23","new_value":"383"}]},{"id":5351,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-05-12T10:07:50Z","details":[{"property":"attr","name":"fixed_version_id","new_value":"173"},{"property":"cf","name":"2","old_value":"173","new_value":"172"}]},{"id":5358,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2015-05-12T14:55:38Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"10"}]},{"id":5359,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2015-05-12T14:55:46Z","details":[{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]},{"id":6331,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2015-09-18T15:17:08Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"383"}]}]}}