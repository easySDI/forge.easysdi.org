{"issue":{"id":808,"project":{"id":16,"name":"easySDI"},"tracker":{"id":1,"name":"Defect"},"status":{"id":10,"name":"Closed"},"priority":{"id":4,"name":"Normal"},"author":{"id":383,"name":"Blatti Yves"},"category":{"id":17,"name":"CATALOG"},"fixed_version":{"id":176,"name":"4.3.2"},"subject":"Validation fails with stereotype \"file\"","description":"Validation fails with stereotype \"file\".\r\nBehavior of the stereotype: if you fill in a file for the first time, the first field is used (and checked by validator).\r\nIf you save and reopen the metadata form, the first field is empty, and the second contains file URL. (see screenshot)\r\nProblem is: the validation fails because of the first field is empty.","done_ratio":100,"custom_fields":[{"id":2,"name":"Affected version","value":"159"}],"created_on":"2014-08-22T07:52:47Z","updated_on":"2015-06-30T11:48:11Z","closed_on":"2015-06-30T11:48:11Z","journals":[{"id":4021,"user":{"id":383,"name":"Blatti Yves"},"notes":"User can edit both fields (he can delete a file for example), so we cannot predict which field is mandatory on form generation.\r\n\r\nFields are:\r\n<pre>\r\n+-------------------------++-----------------+\r\n| Browse field            || Browse button   |\r\n+-------------------------++-----------------+\r\n+-------------------------++-------++--------+\r\n| Previous file           || View  || Delete |\r\n+-------------------------++-------++--------+\r\n</pre>\r\n\r\nI suggest we add a little procedure that runs before validation:\r\n<pre>\r\nforeach(FileStereotypeWithRequiredClass as fs){\r\n   if(fs.Previous_File is blank){\r\n       fs.setBrowse_FieldMandatory();\r\n   }\r\n}\r\n</pre>\r\n\r\nFor this we should should use a custom \"filerequired\" class (not the html \"required\") that we put on the stereotype root, and not pre-set \"required\" on the browse field on form generation.\r\n\r\nAny inputs everyone?\r\n","created_on":"2014-08-22T09:31:03Z","details":[]},{"id":4509,"user":{"id":3,"name":"Magoni Bruno"},"created_on":"2014-12-12T16:06:26Z","details":[{"property":"cf","name":"2","old_value":"155","new_value":"159"}]},{"id":5040,"user":{"id":3,"name":"Magoni Bruno"},"notes":"","created_on":"2015-03-13T14:25:46Z","details":[{"property":"relation","name":"relates","new_value":"801"}]},{"id":5072,"user":{"id":3,"name":"Magoni Bruno"},"notes":"","created_on":"2015-03-18T07:45:44Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"2"},{"property":"attr","name":"assigned_to_id","new_value":"3"}]},{"id":5122,"user":{"id":3,"name":"Magoni Bruno"},"created_on":"2015-03-25T09:05:16Z","details":[{"property":"attr","name":"fixed_version_id","new_value":"174"}]},{"id":5142,"user":{"id":3,"name":"Magoni Bruno"},"notes":"","created_on":"2015-03-26T15:15:44Z","details":[{"property":"attr","name":"fixed_version_id","old_value":"174","new_value":"114"}]},{"id":5275,"user":{"id":3,"name":"Magoni Bruno"},"notes":"","created_on":"2015-04-17T10:09:03Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"3","new_value":"787"},{"property":"attr","name":"fixed_version_id","old_value":"114","new_value":"176"}]},{"id":5389,"user":{"id":761,"name":"Battaglia Marc"},"notes":"","created_on":"2015-05-18T14:32:27Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"},{"property":"attr","name":"assigned_to_id","old_value":"787","new_value":"761"}]},{"id":5717,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-06-30T11:48:11Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"10"},{"property":"attr","name":"assigned_to_id","old_value":"761"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]}]}}