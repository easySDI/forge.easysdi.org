{"issue":{"id":1050,"project":{"id":16,"name":"easySDI"},"tracker":{"id":1,"name":"Defect"},"status":{"id":10,"name":"Closed"},"priority":{"id":5,"name":"High"},"author":{"id":383,"name":"Blatti Yves"},"category":{"id":20,"name":"SHOP"},"fixed_version":{"id":176,"name":"4.3.2"},"subject":"SHOP Pricing does not support \"large\" amounts","description":"SHOP Pricing does not support \"large\" amounts due to low storage definition in databases.\r\nSurface rate, fees, min and max values, totals... ALL have the same datatype : @DECIMAL(6,2)@ which means that *@9'999.99@ is the max.\r\nThis is way too low.*\r\nWe should be able to store at least millions + some margin (low value currencies or enormous orders).\r\n\r\n\r\nNote:\r\nStorage size optimization: @DECIMAL(precision, scale)@\r\n*MySQL*:\r\nhttps://dev.mysql.com/doc/refman/5.1/en/precision-math-decimal-characteristics.html\r\n@packs nine decimal (precision) digits into 4 bytes@\r\n+\r\n@1 byte for every 2 leftover digits@\r\n\r\n*MSSQL*:\r\nhttps://msdn.microsoft.com/fr-ch/library/ms187746.aspx\r\n|precision| bytes |\r\n|1 - 9| 5 |\r\n|10-19| 9 |\r\n|20-28| 13 |\r\n|29-38| 17 |\r\n\r\n*PostgreSQL*:\r\nhttp://www.postgresql.org/docs/8.1/static/datatype.html#DATATYPE-NUMERIC-DECIMAL\r\n@ two bytes for each group of four decimal digits, plus eight bytes overhead@ but @physically stored without any extra leading or trailing zeroes@\r\n\r\n----\r\nSo *@DECIMAL(19,2)@* looks good since it fits on 9Bytes for MySQL and MSSQL (most used easySDI DBMS) and 10Bytes(Maximum)+overhead on PgSQL.\r\n\r\nThe new datatype should be applied to all fields containing prices, fees, etc, min, max, etc.\r\n\r\n","start_date":"2015-06-17","done_ratio":100,"custom_fields":[{"id":2,"name":"Affected version","value":"172"}],"created_on":"2015-06-17T12:36:58Z","updated_on":"2015-09-18T15:21:01Z","closed_on":"2015-07-07T12:45:14Z","journals":[{"id":5658,"user":{"id":761,"name":"Battaglia Marc"},"notes":"","created_on":"2015-06-19T07:45:55Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"2"},{"property":"attr","name":"assigned_to_id","new_value":"761"}]},{"id":5659,"user":{"id":761,"name":"Battaglia Marc"},"notes":"","created_on":"2015-06-19T07:46:06Z","details":[{"property":"attr","name":"status_id","old_value":"2","new_value":"3"}]},{"id":5660,"user":{"id":761,"name":"Battaglia Marc"},"notes":"","created_on":"2015-06-19T12:28:44Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"761","new_value":"383"}]},{"id":5729,"user":{"id":383,"name":"Blatti Yves"},"notes":"All good to me (MySQL)","created_on":"2015-06-30T13:06:50Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"12"},{"property":"attr","name":"assigned_to_id","old_value":"383","new_value":"761"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]},{"id":5749,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2015-07-07T12:45:14Z","details":[{"property":"attr","name":"status_id","old_value":"12","new_value":"10"},{"property":"attr","name":"assigned_to_id","old_value":"761"},{"property":"attr","name":"fixed_version_id","new_value":"176"}]}]}}