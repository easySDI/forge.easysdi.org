{"issue":{"id":1294,"project":{"id":16,"name":"easySDI"},"tracker":{"id":3,"name":"Enhancement"},"status":{"id":10,"name":"Closed"},"priority":{"id":6,"name":"Urgent"},"author":{"id":383,"name":"Blatti Yves"},"category":{"id":20,"name":"SHOP"},"fixed_version":{"id":179,"name":"4.4.1"},"subject":"Add pricing informations in extended metadata","description":"We propose to add the pricing detail (only if there is one and the feature is enabled) in the extended metadata,\r\nthis will allow us to display the details of price in the metadata sheet and results list.\r\n\r\nPricing information will be child of @sdi:ex_Diffusion@ in a node called @sdi:ex_Pricing@, with a type attribute (@free@, @feewithoutapricingprofile@, @feewithapricingprofile@).\r\nUnder it, two nodes:\r\n* the details of the organism pricing (and it's rebates) in : @sdi:ex_PricingOrganism@\r\n* the details of the pricing profile in : @sdi:ex_PricingProfile@ only if there is a pricing profile attached (type=feewithapricingprofile)\r\n\r\nWe propose to keep the diffusion's \"isfree\" attribute for compatibility reasons.\r\n\r\n*Note*: This enhancement has no impact for easySDI installations not using pricing features of SHOP.\r\n\r\nh2. Example with a pricing profile and rebates at organism and profile level: \r\n\r\n<pre>\r\n<code class=\"xml\">\r\n<sdi:ExtendedMetadata lang=\"association\" callfromjoomla=\"1\">\r\n        <sdi:ex_Resource name=\"aaaaaaaaaaaaa\" descriptionLength=\"\">\r\n            <sdi:ex_Metadata created=\"2014-07-02 12:49:57\" updated=\"2014-07-02 12:49:57\">\r\n                <sdi:ex_Diffusion isfree=\"false\" isDownladable=\"false\" isOrderable=\"true\" \r\n                                  surfacemin=\"\" surfacemax=\"100000000000000000000000\" \r\n                                  file_size=\"\" size_unit=\"\" file_type=\"\">\r\n                    <sdi:ex_ExtractionProperties>\r\n                        <sdi:ex_ExtractionProperty id=\"1\" name=\"Format\" alias=\"FORMAT\" \r\n                                                   label=\"Format\" \r\n                                                   mandatory=\"true\" type=\"list\">\r\n                            <sdi:ex_PropertyValue id=\"6\" name=\"BMBLT\" alias=\"bmblt\" label=\"BMBLT\">\r\n                            </sdi:ex_PropertyValue>\r\n                            <sdi:ex_PropertyValue id=\"10\" name=\"DWG\" alias=\"dwg\" label=\"DWG\">\r\n                            </sdi:ex_PropertyValue>\r\n                            <sdi:ex_PropertyValue id=\"39\" name=\"DXF Geobat MD.01\" alias=\"dxf-geobat-md01\" label=\"DXF Geobat MD.01\">\r\n                            </sdi:ex_PropertyValue>\r\n                        </sdi:ex_ExtractionProperty>\r\n                        <sdi:ex_ExtractionProperty id=\"2\" name=\"Syst\u00e8me d'exploitation\" alias=\"os\" \r\n                                                   label=\"Syst\u00e8me d'exploitation\" \r\n                                                   mandatory=\"true\" type=\"list\">\r\n                            <sdi:ex_PropertyValue id=\"17\" name=\"MAC\" alias=\"mac\" label=\"MAC\">\r\n                            </sdi:ex_PropertyValue>\r\n                            <sdi:ex_PropertyValue id=\"19\" name=\"WINDOWS\" alias=\"windows\" label=\"WINDOWS\">\r\n                            </sdi:ex_PropertyValue>\r\n                        </sdi:ex_ExtractionProperty>\r\n                    </sdi:ex_ExtractionProperties>\r\n\r\n                    <!-- BEGIN ENHANCEMENT PROPOSAL -->\r\n                    <sdi:ex_Pricing type=\"feewithapricingprofile\">\r\n                        <sdi:ex_PricingOrganism internal_free=\"false\" fixed_fee_ti=\"50\" data_free_fixed_fee=\"true\">\r\n                            <sdi:ex_CategoryRebate categoryId=\"1\" categoryAlias=\"membres\" categoryName=\"Membres ASIT VD\" rebate=\"15\"/>\r\n                        </sdi:ex_PricingOrganism>\r\n                        <sdi:ex_PricingProfile id=\"2\" name=\"G\u00e9odonn\u00e9e de base \u00e0 10CHF\" alias=\"geodonnee-de-base-10\" fixed_fee=\"0\" surface_rate=\"10.00\" min_fee=\"0\" max_fee=\"2000.00\">\r\n                            <sdi:ex_CategoryRebate categoryId=\"9\" categoryAlias=\"adminpub\" categoryName=\"Administration publiques\" rebate=\"100.00\"/>\r\n                        </sdi:ex_PricingProfile >\r\n                    </sdi:ex_Pricing>\r\n                    <!-- END ENHANCEMENT PROPOSAL -->\r\n\r\n                </sdi:ex_Diffusion>\r\n            </sdi:ex_Metadata>\r\n            <sdi:ex_Version name=\"2014-07-02 12:49:57\">\r\n            </sdi:ex_Version>\r\n            <sdi:ex_Resourcetype name=\"G\u00e9oproduit\" alias=\"geoproduit\">\r\n                <sdi:ex_Logo path=\"\" width=\"\" height=\"\">\r\n                </sdi:ex_Logo>\r\n            </sdi:ex_Resourcetype>\r\n            <sdi:ex_Organism name=\"ASIT-VD\">\r\n                <sdi:ex_Logo path=\"http://www.asitvd.ch/images/joomla_logo_black.jpg\" width=\"\" height=\"\">\r\n                </sdi:ex_Logo>\r\n            </sdi:ex_Organism>\r\n        </sdi:ex_Resource>\r\n        <sdi:links>\r\n            <sdi:parents>\r\n            </sdi:parents>\r\n            <sdi:children>\r\n            </sdi:children>\r\n        </sdi:links>\r\n        <sdi:applications>\r\n        </sdi:applications>\r\n        <sdi:action>\r\n            <sdi:extraction>\r\n                <sdi:html>\r\n                </sdi:html>\r\n            </sdi:extraction>\r\n            <sdi:sheetview>\r\n                <sdi:link>http://dev.t907507.adacv.ad.etat-de-vaud.ch/index.php?option=com_easysdi_catalog&amp;view=sheet&amp;guid=cd4d69ab-e0a0-3f64-2121-5bfae7eb7069&amp;lang=association&amp;catalog=Main&amp;preview=search_list&amp;type=</sdi:link>\r\n            </sdi:sheetview>\r\n            <sdi:exportpdf>\r\n                <sdi:link>http://dev.t907507.adacv.ad.etat-de-vaud.ch/index.php?option=com_easysdi_catalog&amp;task=sheet.exportPDF&amp;id=cd4d69ab-e0a0-3f64-2121-5bfae7eb7069&amp;lang=association&amp;catalog=Main&amp;preview=search_list&amp;type=</sdi:link>\r\n            </sdi:exportpdf>\r\n            <sdi:exportxml>\r\n                <sdi:link>http://dev.t907507.adacv.ad.etat-de-vaud.ch/index.php?option=com_easysdi_catalog&amp;task=sheet.exportXML&amp;id=cd4d69ab-e0a0-3f64-2121-5bfae7eb7069</sdi:link>\r\n            </sdi:exportxml>\r\n        </sdi:action>\r\n    </sdi:ExtendedMetadata>\r\n</code>\r\n</pre>","start_date":"2016-03-21","done_ratio":100,"custom_fields":[{"id":3,"name":"Sponsor","multiple":true,"value":[]},{"id":4,"name":"Functional impact","value":"Add the ability to display pricing information in front-end (via XSLT) "},{"id":5,"name":"Ergonomic impact","value":"-"}],"created_on":"2016-03-21T13:15:03Z","updated_on":"2017-01-19T08:54:57Z","closed_on":"2016-06-17T09:00:03Z","journals":[{"id":7413,"user":{"id":383,"name":"Blatti Yves"},"notes":"","created_on":"2016-03-21T13:15:11Z","details":[{"property":"attr","name":"priority_id","old_value":"4","new_value":"6"}]},{"id":7414,"user":{"id":383,"name":"Blatti Yves"},"notes":"Of course, +1 for me","created_on":"2016-03-22T08:52:31Z","details":[]},{"id":7415,"user":{"id":16,"name":"Portier Thomas"},"notes":"+1","created_on":"2016-03-22T09:04:15Z","details":[]},{"id":7544,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"+1","created_on":"2016-03-31T06:35:55Z","details":[]},{"id":7545,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"notes":"","created_on":"2016-03-31T06:36:08Z","details":[{"property":"attr","name":"status_id","old_value":"7","new_value":"9"},{"property":"attr","name":"assigned_to_id","old_value":"762","new_value":"383"}]},{"id":7551,"user":{"id":383,"name":"Blatti Yves"},"notes":"","created_on":"2016-03-31T13:47:12Z","details":[{"property":"attr","name":"status_id","old_value":"9","new_value":"2"}]},{"id":7571,"user":{"id":383,"name":"Blatti Yves"},"notes":"rev. -9649- 9830","created_on":"2016-04-05T12:41:40Z","details":[{"property":"attr","name":"subject","old_value":"Add princing informations in extendend metadata","new_value":"Add pricing informations in extended metadata"},{"property":"attr","name":"status_id","old_value":"2","new_value":"3"},{"property":"attr","name":"done_ratio","old_value":"0","new_value":"100"}]},{"id":7708,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2016-06-10T07:51:33Z","details":[{"property":"attr","name":"fixed_version_id","new_value":"179"}]},{"id":7740,"user":{"id":383,"name":"Blatti Yves"},"created_on":"2016-06-17T07:10:36Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"12"}]},{"id":7753,"user":{"id":383,"name":"Blatti Yves"},"created_on":"2016-06-17T07:11:16Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"383","new_value":"23"}]},{"id":7777,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2016-06-17T09:00:03Z","details":[{"property":"attr","name":"status_id","old_value":"12","new_value":"10"}]},{"id":8080,"user":{"id":23,"name":"Van Hoecke H\u00e9l\u00e8ne "},"created_on":"2017-01-19T08:54:55Z","details":[{"property":"attr","name":"assigned_to_id","old_value":"23"}]}]}}